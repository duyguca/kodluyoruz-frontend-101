(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{MaL9:function(e,n,t){"use strict";t.d(n,"a",(function(){return f}));t("TeQF"),t("2B1R"),t("E9XD"),t("+2oP");var r,o=t("q1tI"),i=t("NFLX"),a=t("c/gA"),c=t("Ivux"),u=t("mJdZ"),l=t("FkZz");function s(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return d(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return d(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var m=(null!=(r=i.a)&&null!=(r=r.recommendations)?r.maxItemsSent:r)||10,f=function(e,n){var t,r=Object(o.useContext)(l.a),i=Object(a.a)(),d=Object(c.a)({subscribeToLists:!0}).lists,f={recentlyViewed:r?r.reduce((function(n,t){return t.productCode&&e!==t.productCode&&n.push(t.productCode),n}),[]).slice(0,m):(console.warn("No recently viewed products available"),[]),cartItems:i.cart?((null!=(t=i)&&null!=(t=t.cart)?t.lineItems:t)||[]).map((function(e){return e&&e.product.productCode})):[],wishlistItems:function(){if(!Object(u.d)("recommendations")||!d)return[];for(var e,n=[],t=s(d.results);!(e=t()).done;){var r=e.value;n.push.apply(n,r.lineItems.map((function(e){var n;return null===(n=e.product)||void 0===n?void 0:n.productCode})))}return n.filter(Boolean)}(),orderedItems:n?n.slice(0,m):[]},p=i&&i.__typename&&!0===i.isOver18yo;return{fetched:!(!i.fetched||i.isLid&&void 0===d),recommendationData:f,renderRecommendations:!!p}}},QxVr:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var r=t("q1tI"),o=t("MTJR"),i=function(){var e=Object(o.c)(),n=Object(o.d)().pageType,t=Object(r.useState)(!1),i=t[0],a=t[1];return{reportRecsLoaded:function(t){t&&!i&&e&&(a(!0),e.logRecsLoaded({data:{page_type:n,recommendation_id:t}}))},handleInteraction:function(t,r){r&&e&&e.logRecsAdded({data:{page_type:n,recommendation_id:r,interaction_type:"click",product_id:t}})},handleIntersection:function(t,r,o){t&&r&&e&&o&&e.logRecsDisplayed({data:{page_type:n,recommendation_id:r,recs_displayed_fraction:o}})}}}},Swin:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var r=t("q1tI"),o=t.n(r),i=t("XIbt"),a=t("eTuP"),c=function(){return o.a.createElement(a.a,null,o.a.createElement(i.b,null))}},UMT9:function(e,n,t){"use strict";var r,o,i=t("NFLX"),a=t("q1tI"),c=t.n(a),u=t("lTCR"),l=t.n(u),s=t("fIYg"),d=t("c/gA"),m=t("RlS9"),f=t("KweH"),p=["cart","wishlist"];function g(e,n){return n||(n=e.slice(0)),e.raw=n,e}var v={category:l()(r||(r=g(["\n    fragment Header_Category on ContentstackCategory {\n      id\n      title\n      analyticsTitle\n      target {\n        ... on ContentTarget {\n          url\n          seeAllText\n        }\n        ... on ExternalTarget {\n          url\n          openNewWindow\n          seeAllText\n        }\n      }\n      tag\n      imageSrc {\n        ...ImageAsset\n      }\n      highlighted\n      thumbnailImage #Being used as a type for utility links. TODO: Yes, we need to change it https://legogroup.atlassian.net/browse/SET-4992\n      promoBlockPosition\n      promotionalBlocks {\n        id\n        title\n        description\n        imageSrc {\n          ...ImageAsset\n        }\n        analyticsTitle\n        target {\n          ... on ContentTarget {\n            url\n            seeAllText\n          }\n          ... on ExternalTarget {\n            url\n            openNewWindow\n            seeAllText\n          }\n        }\n      }\n    }\n\n    ","\n  "])),m.b.fragment)},b=l()(o||(o=g(["\n  query Categories {\n    primaryNavigation {\n      mainNavigation {\n        # Level 1\n        ...Header_Category\n        children {\n          # Level 2\n          ...Header_Category\n          children {\n            # Level 3\n            ...Header_Category\n          }\n        }\n      }\n      utilityNavigation {\n        ...Header_Category\n      }\n      globalBanner {\n        title\n        banners {\n          id\n          __typename\n          ... on GlobalBannerSection {\n            id\n            title\n            section {\n              title\n              image\n              callToActionLink\n              callToActionText\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"])),v.category);n.a=function(){var e=Object(d.a)();return e&&(e.hasUserData=!i.a.isServiceNavigation||"boolean"==typeof e.isLid),c.a.createElement(s.a,{key:"categories",query:b},(function(n){var t;if(null==n||null===(t=n.data)||void 0===t||!t.primaryNavigation)return null;var r=n.data.primaryNavigation,o=r.mainNavigation,i=r.utilityNavigation,a=r.globalBanner;if(!o)return null;var u=e||{},l=u.cart,s=u.wishlist,d=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(u,p);return c.a.createElement(f.a,{categories:o,utilityLinks:i,globalBanner:a,cart:l,user:d,wishlist:s})}))}},X4xA:function(e,n,t){"use strict";var r,o,i=t("q1tI"),a=t.n(i),c=t("lTCR"),u=t.n(c),l=t("ttZb"),s=t("1aUu"),d=t("Zhru"),m=t("aw1k"),f=t("vOnD").d.div.withConfig({displayName:"UserGeneratedContentWithDatastyles__LoadingContainer",componentId:"sc-19n35yb-0"})(["\n  width: 100%\n  display: flex;\n  justify-content: center;\n  min-height: ",";\n"],(function(e){return e.theme.sizing("xxl")}));function p(e,n){return n||(n=e.slice(0)),e.raw=n,e}var g=u()(r||(r=p(["\n  query GetUgcContents($ugcKey: String!, $ugcType: String!) {\n    ugcContents(ugcKey: $ugcKey, ugcType: $ugcType) {\n      contents {\n        id\n        source\n        uploaderUsername\n        image\n        sourceURL\n      }\n    }\n  }\n"]))),v=function(e){var n=e.userGeneratedContentData,t=e.layout,r=n&&n.ugcBlock?n.ugcBlock[0]:null,o=Object(l.b)(g),i=o[0],c=o[1],u=c.loading,p=c.data,v=void 0===p?{}:p,b=c.error;if(!r||b)return null;if(u)return a.a.createElement(f,null,a.a.createElement(m.a,{size:"xl",color:"yellow"}));return a.a.createElement(s.a,{onIntersection:function(){r&&i({variables:{ugcKey:r.ugcKey,ugcType:r.ugcType}})},unObserveAfterFirstIntersection:!0},(function(e){var n=e.onRef;return a.a.createElement("div",{ref:n},v.ugcContents&&v.ugcContents.contents.length?a.a.createElement(d.a,{ugcBlock:r,layout:t,ugcContents:v.ugcContents.contents}):null)}))};v.fragments={userGeneratedContent:u()(o||(o=p(["\n    fragment UserGeneratedContentData on UserGeneratedContent {\n      layoutLegacy {\n        fullWidth\n        removePadding\n      }\n      ugcBlock {\n        title\n        text\n        ugcType\n        ugcKey\n      }\n    }\n  "])))};n.a=v},eTuP:function(e,n,t){"use strict";t("yq1k"),t("zKZe");var r,o=t("q1tI"),i=t.n(o),a=t("lTCR"),c=t.n(a),u=t("ttZb"),l=t("lN9A"),s=t("s3ei"),d=t("XIbt"),m=t("FNVC"),f=t("DdOa"),p=["p"];var g,v,b=c()(r||(g=["\n  query GetUrlRedirect($path: String!, $productCode: String) {\n    urlRedirection(path: $path, productCode: $productCode) {\n      destination\n      isTemporary\n    }\n  }\n"],v||(v=g.slice(0)),g.raw=v,r=g)),y=["","favicon.ico","linkshare"],h=/^apple-touch-icon.*/i;n.a=function(e){var n,t,r=e.redirectPermanently,o=e.children,a=Object(l.a)(),c=a.path,g=a.query,v=a.location,C=a.createHref,I=Object(u.b)(b),O=I[0],S=I[1],j=S.data,w=S.loading,T=S.called;if(h.test(c)||y.includes(c.toLowerCase()))return i.a.createElement(d.b,null);if(!T)return O({variables:{path:c,productCode:g.p}}),i.a.createElement(m.a,null);if(!(w||null!=j&&null!==(n=j.urlRedirection)&&void 0!==n&&n.destination))return o||null;if(null!=j&&null!==(t=j.urlRedirection)&&void 0!==t&&t.destination){var k=j.urlRedirection,_=k.destination,E=k.isTemporary,R=(g.p,function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(g,p)),A=Object(s.b)(R),F=A?_+"?"+A:_,x=C(Object.assign({},v,{pathname:F}));return i.a.createElement(f.a,{to:x,redirectPermanently:!E&&r})}return i.a.createElement(m.a,null)}},msch:function(e,n,t){"use strict";var r,o,i,a,c,u,l,s=t("q1tI"),d=t.n(s),m=t("lTCR"),f=t.n(m),p=t("fIYg"),g=t("0MgI");function v(e,n){return n||(n=e.slice(0)),e.raw=n,e}var b={footerSupport:f()(r||(r=v(["\n    fragment Footer_Support on FooterSupport {\n      imageUrl\n      title\n      subtitle\n      phone\n      email {\n        text\n        url\n      }\n      chat\n    }\n  "]))),footerLink:f()(o||(o=v(["\n    fragment Footer_Link on FooterLink {\n      title\n      url\n      imageUrl\n    }\n  "]))),footerGuarantee:f()(i||(i=v(["\n    fragment Footer_Guarantee on FooterLegoGuarantee {\n      title\n      links {\n        ...Footer_Link\n      }\n    }\n  "]))),footerEmailSubscription:f()(a||(a=v(["\n    fragment Footer_EmailSubscription on FooterEmailSubscription {\n      description\n      title\n      placeholderText\n      buttonText\n    }\n  "]))),footerSocial:f()(c||(c=v(["\n    fragment Footer_Social on FooterSocial {\n      title\n      links {\n        url\n        iconType\n      }\n    }\n  "]))),footerFindAStore:f()(u||(u=v(["\n    fragment Footer_FindAStore on FooterFindAStore {\n      title\n      subtitle\n    }\n  "])))},y=f()(l||(l=v(["\n  query FooterData {\n    footer {\n      title\n      support {\n        ...Footer_Support\n      }\n      legoGuarantee {\n        ...Footer_Guarantee\n      }\n      emailSubscription {\n        ...Footer_EmailSubscription\n      }\n      social {\n        ...Footer_Social\n      }\n      findAStore {\n        ...Footer_FindAStore\n      }\n      links {\n        ...Footer_Link\n        children {\n          ...Footer_Link\n        }\n      }\n      policyLinks {\n        ...Footer_Link\n      }\n      disclaimer\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),b.footerLink,b.footerSupport,b.footerGuarantee,b.footerEmailSubscription,b.footerSocial,b.footerFindAStore);n.a=function(){return d.a.createElement(p.a,{query:y},(function(e){var n=e.data;return!e.loading&&n&&n.footer?d.a.createElement(g.a,{footerContent:n.footer}):null}))}},q1eO:function(e,n,t){"use strict";t.d(n,"a",(function(){return d}));t("TeQF"),t("zKZe");var r=t("q1tI"),o=t("ttZb"),i=t("4yIv"),a=t("nQC+"),c=t("MTJR"),u=t("rpc3"),l=t("MaL9"),s=t("QxVr"),d=function(e,n){var t,d,m,f=n.productCode,p=n.orderedItems,g=n.loadOnMount,v=null,b=null,y=Object(c.c)(),h=Object(c.d)().pageType,C=Object(l.a)(f,p),I=C.fetched,O=C.recommendationData,S=C.renderRecommendations,j=Object(s.a)(),w=j.handleIntersection,T=j.handleInteraction,k=Object(o.b)(u.a,{fetchPolicy:"network-only"}),_=k[0],E=k[1],R=E.data,A=E.loading,F=E.called,x=Object(a.f)(),L=Object(a.b)(),$=I&&S&&x&&e&&!F&&!A&&!(null!=R&&null!==(t=R.recommender)&&void 0!==t&&t.id),P=Object(r.useMemo)((function(){return{variables:Object.assign({siteArea:e,productCode:f,sessionCookieId:x,crossSessionCookieId:L},O)}}),[]),q=Object(r.useCallback)((function(){$&&_(P)}),[$]);null!=R&&null!==(d=R.recommender)&&void 0!==d&&d.id&&(b=R.recommender.id,v=(null===(m=R.recommender.recommendations)||void 0===m?void 0:m.filter((function(e){var n,t=null!=e&&e.variants?e.variants[0]:null==e?void 0:e.variant;return null==t||null===(n=t.attributes)||void 0===n?void 0:n.canAddToBag})))||[]);var N=Object(i.a)(b);return Object(r.useEffect)((function(){b&&N!==b&&(null==y||y.logRecsLoaded({data:{page_type:h,recommendation_id:b}}))}),[b,y,h,N]),Object(r.useEffect)((function(){$&&g&&_(P)}),[$,g]),{loadRecommendations:q,recommendedProducts:v,recommendationId:b,handleRecsInteraction:T,handleRecsIntersection:w}}},qfJt:function(e,n,t){"use strict";t("TeQF"),t("zKZe");var r=t("q1tI"),o=t.n(r),i=t("qnxR"),a=t("uVGu"),c=t("nQC+"),u=t("B33w"),l=t("gSCk"),s=t("MaL9"),d=t("QxVr"),m=(t("2B1R"),t("m4Mt")),f=t("5P45"),p=t("vFDw"),g=t("vOnD"),v=g.d.div.withConfig({displayName:"ProductRecommendationsstyles__Wrapper",componentId:"sc-1anuv2e-0"})(["\n  margin: 0 auto;\n  margin-top: ",";\n  padding: ",";\n  background: ",";\n\n  ",";\n\n  ",";\n"],(function(e){return e.theme.sizing("lg")}),(function(e){return e.theme.sizing("ms")}),(function(e){return e.theme.color("white")}),(function(e){return e.theme.media.min("small")(Object(g.c)(["\n      padding-top: ",";\n      padding-bottom: ",";\n    "],e.theme.sizing("lg"),e.theme.sizing("lg")))}),(function(e){return e.theme.media.min("medium")(Object(g.c)(["\n      padding: "," ","\n        "," ",";\n      max-width: ",";\n      margin: auto;\n    "],e.theme.sizing("lg"),e.theme.sizing("xxl"),e.theme.sizing("xxl"),e.theme.sizing("xxl"),e.theme.maxWidth()))})),b=g.d.div.withConfig({displayName:"ProductRecommendationsstyles__Container",componentId:"sc-1anuv2e-1"})(["\n  padding: 0;\n  width: 100%;\n  max-width: 100%;\n\n  ",";\n"],(function(e){return e.theme.media.min("massive")(Object(g.c)(["\n      background: ",";\n    "],e.theme.color("white")))})),y=function(e){var n=e.id,t=e.recommendations,i=e.onRef,a=e.titleData,c=e.onCart,u=e.visibilityTracking,l=Object(d.a)().handleInteraction,s=Object(m.a)(),g=a.isCmsContent,y=void 0!==g&&g,h=a.title,C=a.showTitle,I=void 0!==C&&C,O=y?h:s("recommended.title"),S=Object(r.useMemo)((function(){return t.map((function(e){return{product:e}}))}),[t]);return o.a.createElement(b,null,o.a.createElement(v,{"data-test":"product-recommended",ref:i},o.a.createElement(p.a,{title:O,showTitle:y&&I||!y,"data-test":"recommendations",products:S,visibilityTracking:u,renderProduct:function(e){return o.a.createElement(f.a,{recommendationId:n,componentType:"CarouselProductLeaf",product:e.product,onClickLink:function(){l(e.product.productCode,n)},onCart:c})}})))},h=function(e){var n=e.onRef;return o.a.createElement("div",{"data-test":"product-recommended",ref:n})},C=t("rpc3");n.a=function(e){var n,t=e.productCode,m=e.siteArea,f=e.isCmsContent,p=void 0!==f&&f,g=e.title,v=e.showTitle,b=void 0!==v&&v,I=e.onIntersection,O=e.orderedItems,S=Object(s.a)(t,O),j=S.fetched,w=S.recommendationData,T=S.renderRecommendations,k=Object(i.a)(),_=Object(d.a)(),E=_.reportRecsLoaded,R=_.handleIntersection,A=Object(r.useState)(null),F=A[0],x=A[1],L=Object(r.useState)(!1),$=L[0],P=L[1],q=Object(r.useRef)(F),N=Object(r.useRef)(!0),D=Object(r.useState)(void 0),B=D[0],G=D[1],z=Object(r.useState)(null),M=z[0],U=z[1],K=Object(r.useState)(!1),V=K[0],Q=K[1],Z=function(e){P(e),I&&I()},H=function(){if(T){n&&(n.unsubscribe(),n=void 0);var r=Object(c.d)(),o=Object(c.b)();if(r&&e.siteArea){var i=k.watchQuery({query:C.a,fetchPolicy:"network-only",variables:Object.assign({siteArea:m,productCode:t,sessionCookieId:r,crossSessionCookieId:o},w)});n=i.subscribe((function(e){e.data&&!e.errors&&function(e){var n=e&&e.recommender;if(n){var t=n.recommendations,r=t&&t.length?t.filter((function(e){var n=function(e){var n,t;return"SingleVariantProduct"===e.__typename?null!=(n=e)?n.variant:n:"MultiVariantProduct"===e.__typename?null!=(t=e)&&null!=(t=t.variants)?t[0]:t:null}(e);return n&&n.attributes&&n.attributes.canAddToBag})):[];U(r),G(n.id)}}(e.data)}))}}};if(Object(a.a)((function(){Q(!0)})),Object(r.useEffect)((function(){return E(B)}),[B,E]),Object(r.useEffect)((function(){if(j)return H(),function(){n&&n.unsubscribe()}}),[j,t,m,T]),Object(r.useEffect)((function(){$&&F&&B&&(N.current||q.current&&q.current<F)&&(q.current=F,N.current=!1,R($,B,F))}),[B,R,F,$,q]),!V||!B||!M)return null;var J=B&&(!M||!M.length);return T?o.a.createElement(l.a,{onIntersection:function(e){return Z(e)}},(function(e){var n=e.onRef;return J?o.a.createElement(h,{onRef:n}):o.a.createElement(o.a.Fragment,null,o.a.createElement(y,{productCode:t,onRef:n,id:B,recommendations:M,titleData:{isCmsContent:p,showTitle:b,title:g},onCart:"SHOPPING_CART"===m,visibilityTracking:function(e){return function(e){x(e)}(e)}}),o.a.createElement(u.c,null))})):null}},rpc3:function(e,n,t){"use strict";t.d(n,"a",(function(){return l}));var r,o=t("lTCR"),i=t.n(o),a=t("DncS");var c,u,l=i()(r||(c=["\n  query ProductRecommendedQuery(\n    $siteArea: RecommendationSiteAreas!\n    $productCode: String\n    $cartItems: [String!]\n    $wishlistItems: [String!]\n    $recentlyViewed: [String!]\n    $sessionCookieId: String!\n    $crossSessionCookieId: String\n    $limit: Int = 12\n    $orderedItems: [String!]\n  ) {\n    recommender(\n      limit: $limit\n      siteArea: $siteArea\n      productCode: $productCode\n      cartItems: $cartItems\n      wishlistItems: $wishlistItems\n      recentlyViewedItems: $recentlyViewed\n      orderedItems: $orderedItems\n      sessionCookieId: $sessionCookieId\n      crossSessionCookieId: $crossSessionCookieId\n    ) {\n      id\n      recommendations {\n        ...Product_ProductItem\n      }\n    }\n  }\n\n  ","\n"],u||(u=c.slice(0)),c.raw=u,r=c),a.a)},"v+Ki":function(e,n,t){"use strict";t.d(n,"a",(function(){return l}));t("sMBO");var r=t("q1tI"),o=t.n(r),i=t("vOnD"),a=t("RD9a"),c=function(e){var n=e.children;return o.a.createElement(i.a.Provider,{value:a.b},n)};function u(e,n){return(u=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var l=function(e){var n,t;return t=n=function(n){var t,r;function i(){return n.apply(this,arguments)||this}return r=n,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,u(t,r),i.prototype.render=function(){return o.a.createElement(c,null,o.a.createElement(e,this.props))},i}(r.Component),n.displayName="withTheme("+function(e){return e.displayName||e.name||"Component"}(e)+")",t}}}]);
//# sourceMappingURL=4dbaa24c77b175d1c84c.13.js.map